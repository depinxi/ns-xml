<?xml version="1.0" encoding="UTF-8"?>
<sh:functions xmlns:sh="http://xsd.nore.fr/bash" xmlns:xi="http://www.w3.org/2001/XInclude">
	<sh:function name="error">
		<sh:parameter name="errno" type="numeric">1</sh:parameter>
		<sh:body><![CDATA[
local message="${@}"
if [ -z "${errno##*[!0-9]*}" ]
then 
	message="${errno} ${message}"
	errno=1
fi
echo "${message}"
exit ${errno}
		]]></sh:body>
	</sh:function>
	<sh:function name="chunk_check_nsxml_ns_path">
		<sh:body><![CDATA[
if [ ! -z "${nsxmlPath}" ]
then
	if ${nsxmlPathRelative}
	then
		nsPath="${scriptPath}/${nsxmlPath}"
	else
		nsPath="${nsxmlPath}"
	fi
	
	[ -d "${nsPath}" ] || return 1
	
	nsPath="$(ns_realpath "${nsPath}")"
fi
[ -d "${nsPath}" ]
]]></sh:body>
	</sh:function>
	<sh:function name="get_program_version">
		<sh:parameter name="file" />
		<sh:body><![CDATA[local tmpXslFile="/tmp/get_program_version.xsl"
cat > "${tmpXslFile}" << GETPROGRAMVERSIONXSLEOF]]></sh:body>
<sh:body indent="false"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:prg="http://xsd.nore.fr/program">
	<xsl:output method="text" encoding="utf-8" />
	<xsl:template match="//prg:program">
		<xsl:value-of select="@version" />
		<xsl:text>&#10;</xsl:text>
	</xsl:template>
</xsl:stylesheet>
GETPROGRAMVERSIONXSLEOF
]]></sh:body>
		<sh:body><![CDATA[local result="$(xsltproc --xinclude "${tmpXslFile}" "${file}")"
rm -f "${tmpXslFile}"
if [ ! -z "${result##*[!0-9.]*}" ]
then
	echo "${result}"
	return 0
else
	return 1
fi
]]></sh:body>
		<sh:body><![CDATA[
]]></sh:body>
	</sh:function>
</sh:functions>
