<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright Â© 2011 by Renaud Guillard (dev@niao.fr) -->
<prg:program xmlns:prg="http://xsd.nore.fr/program" version="2.0" xmlns:xi="http://www.w3.org/2001/XInclude">
	<prg:name>build-shellscript</prg:name>
	<prg:author>Renaud Guillard</prg:author>
	<prg:version>2.0</prg:version>
	<prg:license>Copyright (c) 2011 by Renaud Guillard (dev@niao.fr)</prg:license>
	<prg:documentation>
		<prg:abstract>Shell script builder which use program interface XML definition file to automatically generate command line processing and help messages</prg:abstract>
	</prg:documentation>
	<prg:ui>
		<prg:label>Shellscript builder</prg:label>
	</prg:ui>
	<prg:options>
		
		<!-- ns-xml path -->
		<xi:include href="options.xml" xpointer="xmlns(prg=http://xsd.nore.fr/program) xpointer(//prg:group[@id = 'nsxml.option.nsxmlPathGroup'])" />

		<!-- program interface XML definition file -->
		<xi:include href="options.xml" xpointer="xmlns(prg=http://xsd.nore.fr/program) xpointer(//prg:argument[@id = 'nsxml.option.xmlProgramDescriptionPath'])" />

		<prg:argument required="true" id="xmlShellFileDescriptionPath">
			<prg:databinding>
				<prg:variable>xmlShellFileDescriptionPath</prg:variable>
			</prg:databinding>
			<prg:documentation>
				<prg:abstract>XML shell file</prg:abstract>
				<prg:details>
					A xml file following the bash XML schema
					<prg:endl />
					The file may include a program interface XML definition
				</prg:details>
			</prg:documentation>
			<prg:type>
				<prg:path exist="true">
					<prg:kinds>
						<prg:file />
					</prg:kinds>
					<prg:patterns>
						<prg:pattern>
							<prg:name>Xml shell file</prg:name>
							<prg:rules>
								<prg:rule>
									<prg:endWith>.xsh</prg:endWith>
								</prg:rule>
							</prg:rules>
						</prg:pattern>
					</prg:patterns>
				</prg:path>
			</prg:type>
			<prg:names>
				<prg:short>s</prg:short>
				<prg:long>shell</prg:long>
			</prg:names>
		</prg:argument>

		<!-- Skip validation -->
		<xi:include href="options.xml" xpointer="xmlns(prg=http://xsd.nore.fr/program) xpointer(//prg:switch[@id = 'nsxml.option.skipValidation'])" />

		<!-- Tweaks -->
		
		<prg:argument id="defaultInterpreter">
			<prg:databinding>
				<prg:variable>defaultInterpreter</prg:variable>
			</prg:databinding>
			<prg:documentation>
				<prg:abstract>Default shell interpreter</prg:abstract>
				<prg:details>Use this value if the XSH file does not define one</prg:details>
			</prg:documentation>
			<prg:names>
				<prg:long>interpreter</prg:long>
				<prg:short>i</prg:short>
			</prg:names>
			<prg:select>
				<prg:option>/usr/bin/env bash</prg:option>
				<prg:option>/bin/bash</prg:option>
				<prg:option>/usr/bin/env zsh</prg:option>
				<prg:option>/bin/zsh</prg:option>
			</prg:select>
		</prg:argument>

		<prg:switch id="prefixSubcommandBoundVariableName">
			<prg:databinding>
				<prg:variable>prefixSubcommandBoundVariableName</prg:variable>
			</prg:databinding>
			<prg:documentation>
				<prg:abstract>Prefix subcommand options bound variable names</prg:abstract>
				<prg:details>This will prefix all subcommand options bound variable name by the subcommand name (sc_varianbleNmae).
				This avoid variable name aliasing.
				</prg:details>
			</prg:documentation>
			<prg:names>
				<prg:long>prefix-sc-variables</prg:long>
				<prg:short>p</prg:short>
			</prg:names>
		</prg:switch>

		<!-- debugMode -->
		<xi:include href="options.xml" xpointer="xmlns(prg=http://xsd.nore.fr/program) xpointer(//prg:switch[@id = 'nsxml.option.debugMode'])" />

		<!-- Help -->
		<xi:include href="../lib/options/options.xml" xpointer="xmlns(prg=http://xsd.nore.fr/program) xpointer(//prg:switch[@id = 'prg.option.displayHelp'])" />
		
		<prg:argument required="true">
			<prg:databinding>
				<prg:variable>outputScriptFilePath</prg:variable>
			</prg:databinding>
			<prg:documentation>
				<prg:abstract>Output file path</prg:abstract>
			</prg:documentation>
			<prg:names>
				<prg:short>o</prg:short>
				<prg:long>output</prg:long>
			</prg:names>
			<prg:type>
				<prg:path>
					<prg:kinds>
						<prg:file />
					</prg:kinds>
				</prg:path>
			</prg:type>
		</prg:argument>

	</prg:options>
</prg:program>
